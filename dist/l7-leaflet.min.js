(function (R, $) {
  if (typeof exports == 'object' && typeof module == 'object')
    module.exports = $(require('L'), require('L7'));
  else if (typeof define == 'function' && define.amd) define(['L', 'L7'], $);
  else {
    var U = typeof exports == 'object' ? $(require('L'), require('L7')) : $(R.L, R.L7);
    for (var v in U) (typeof exports == 'object' ? exports : R)[v] = U[v];
  }
})(self, function (et, R) {
  return (function () {
    var $ = {
        787: function (e) {
          'use strict';
          e.exports = et;
        },
        980: function (e) {
          'use strict';
          e.exports = R;
        },
        115: function (e) {
          function a(s) {
            if (s === void 0)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return s;
          }
          (e.exports = a), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        156: function (e) {
          function a(f, d, u, c, h, y, _) {
            try {
              var P = f[y](_),
                L = P.value;
            } catch (b) {
              u(b);
              return;
            }
            P.done ? d(L) : Promise.resolve(L).then(c, h);
          }
          function s(f) {
            return function () {
              var d = this,
                u = arguments;
              return new Promise(function (c, h) {
                var y = f.apply(d, u);
                function _(L) {
                  a(y, c, h, _, P, 'next', L);
                }
                function P(L) {
                  a(y, c, h, _, P, 'throw', L);
                }
                _(void 0);
              });
            };
          }
          (e.exports = s), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        690: function (e) {
          function a(s, f) {
            if (!(s instanceof f)) throw new TypeError('Cannot call a class as a function');
          }
          (e.exports = a), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        728: function (e) {
          function a(f, d) {
            for (var u = 0; u < d.length; u++) {
              var c = d[u];
              (c.enumerable = c.enumerable || !1),
                (c.configurable = !0),
                'value' in c && (c.writable = !0),
                Object.defineProperty(f, c.key, c);
            }
          }
          function s(f, d, u) {
            return (
              d && a(f.prototype, d),
              u && a(f, u),
              Object.defineProperty(f, 'prototype', { writable: !1 }),
              f
            );
          }
          (e.exports = s), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        389: function (e, a, s) {
          var f = s(808),
            d = s(617),
            u = s(993);
          function c(h) {
            var y = d();
            return function () {
              var P = f(h),
                L;
              if (y) {
                var b = f(this).constructor;
                L = Reflect.construct(P, arguments, b);
              } else L = P.apply(this, arguments);
              return u(this, L);
            };
          }
          (e.exports = c), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        416: function (e) {
          function a(s, f, d) {
            return (
              f in s
                ? Object.defineProperty(s, f, {
                    value: d,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0,
                  })
                : (s[f] = d),
              s
            );
          }
          (e.exports = a), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        808: function (e) {
          function a(s) {
            return (
              (e.exports = a =
                Object.setPrototypeOf
                  ? Object.getPrototypeOf.bind()
                  : function (d) {
                      return d.__proto__ || Object.getPrototypeOf(d);
                    }),
              (e.exports.__esModule = !0),
              (e.exports.default = e.exports),
              a(s)
            );
          }
          (e.exports = a), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        655: function (e, a, s) {
          var f = s(15);
          function d(u, c) {
            if (typeof c != 'function' && c !== null)
              throw new TypeError('Super expression must either be null or a function');
            (u.prototype = Object.create(c && c.prototype, {
              constructor: { value: u, writable: !0, configurable: !0 },
            })),
              Object.defineProperty(u, 'prototype', { writable: !1 }),
              c && f(u, c);
          }
          (e.exports = d), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        617: function (e) {
          function a() {
            if (typeof Reflect > 'u' || !Reflect.construct || Reflect.construct.sham) return !1;
            if (typeof Proxy == 'function') return !0;
            try {
              return (
                Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0
              );
            } catch {
              return !1;
            }
          }
          (e.exports = a), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        122: function (e, a, s) {
          var f = s(416);
          function d(c, h) {
            var y = Object.keys(c);
            if (Object.getOwnPropertySymbols) {
              var _ = Object.getOwnPropertySymbols(c);
              h &&
                (_ = _.filter(function (P) {
                  return Object.getOwnPropertyDescriptor(c, P).enumerable;
                })),
                y.push.apply(y, _);
            }
            return y;
          }
          function u(c) {
            for (var h = 1; h < arguments.length; h++) {
              var y = arguments[h] != null ? arguments[h] : {};
              h % 2
                ? d(Object(y), !0).forEach(function (_) {
                    f(c, _, y[_]);
                  })
                : Object.getOwnPropertyDescriptors
                ? Object.defineProperties(c, Object.getOwnPropertyDescriptors(y))
                : d(Object(y)).forEach(function (_) {
                    Object.defineProperty(c, _, Object.getOwnPropertyDescriptor(y, _));
                  });
            }
            return c;
          }
          (e.exports = u), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        215: function (e, a, s) {
          var f = s(71);
          function d(u, c) {
            if (u == null) return {};
            var h = f(u, c),
              y,
              _;
            if (Object.getOwnPropertySymbols) {
              var P = Object.getOwnPropertySymbols(u);
              for (_ = 0; _ < P.length; _++)
                (y = P[_]),
                  !(c.indexOf(y) >= 0) &&
                    (!Object.prototype.propertyIsEnumerable.call(u, y) || (h[y] = u[y]));
            }
            return h;
          }
          (e.exports = d), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        71: function (e) {
          function a(s, f) {
            if (s == null) return {};
            var d = {},
              u = Object.keys(s),
              c,
              h;
            for (h = 0; h < u.length; h++) (c = u[h]), !(f.indexOf(c) >= 0) && (d[c] = s[c]);
            return d;
          }
          (e.exports = a), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        993: function (e, a, s) {
          var f = s(698).default,
            d = s(115);
          function u(c, h) {
            if (h && (f(h) === 'object' || typeof h == 'function')) return h;
            if (h !== void 0)
              throw new TypeError('Derived constructors may only return object or undefined');
            return d(c);
          }
          (e.exports = u), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        61: function (e, a, s) {
          var f = s(698).default;
          function d() {
            'use strict';
            (e.exports = d =
              function () {
                return u;
              }),
              (e.exports.__esModule = !0),
              (e.exports.default = e.exports);
            var u = {},
              c = Object.prototype,
              h = c.hasOwnProperty,
              y = typeof Symbol == 'function' ? Symbol : {},
              _ = y.iterator || '@@iterator',
              P = y.asyncIterator || '@@asyncIterator',
              L = y.toStringTag || '@@toStringTag';
            function b(n, t, r) {
              return (
                Object.defineProperty(n, t, {
                  value: r,
                  enumerable: !0,
                  configurable: !0,
                  writable: !0,
                }),
                n[t]
              );
            }
            try {
              b({}, '');
            } catch {
              b = function (r, o, i) {
                return (r[o] = i);
              };
            }
            function Y(n, t, r, o) {
              var i = t && t.prototype instanceof N ? t : N,
                p = Object.create(i.prototype),
                m = new V(o || []);
              return (
                (p._invoke = (function (w, S, l) {
                  var x = 'suspendedStart';
                  return function (O, G) {
                    if (x === 'executing') throw new Error('Generator is already running');
                    if (x === 'completed') {
                      if (O === 'throw') throw G;
                      return j();
                    }
                    for (l.method = O, l.arg = G; ; ) {
                      var K = l.delegate;
                      if (K) {
                        var T = W(K, l);
                        if (T) {
                          if (T === k) continue;
                          return T;
                        }
                      }
                      if (l.method === 'next') l.sent = l._sent = l.arg;
                      else if (l.method === 'throw') {
                        if (x === 'suspendedStart') throw ((x = 'completed'), l.arg);
                        l.dispatchException(l.arg);
                      } else l.method === 'return' && l.abrupt('return', l.arg);
                      x = 'executing';
                      var D = I(w, S, l);
                      if (D.type === 'normal') {
                        if (((x = l.done ? 'completed' : 'suspendedYield'), D.arg === k)) continue;
                        return { value: D.arg, done: l.done };
                      }
                      D.type === 'throw' &&
                        ((x = 'completed'), (l.method = 'throw'), (l.arg = D.arg));
                    }
                  };
                })(n, r, m)),
                p
              );
            }
            function I(n, t, r) {
              try {
                return { type: 'normal', arg: n.call(t, r) };
              } catch (o) {
                return { type: 'throw', arg: o };
              }
            }
            u.wrap = Y;
            var k = {};
            function N() {}
            function A() {}
            function M() {}
            var B = {};
            b(B, _, function () {
              return this;
            });
            var z = Object.getPrototypeOf,
              g = z && z(z(C([])));
            g && g !== c && h.call(g, _) && (B = g);
            var E = (M.prototype = N.prototype = Object.create(B));
            function q(n) {
              ['next', 'throw', 'return'].forEach(function (t) {
                b(n, t, function (r) {
                  return this._invoke(t, r);
                });
              });
            }
            function Z(n, t) {
              function r(i, p, m, w) {
                var S = I(n[i], n, p);
                if (S.type !== 'throw') {
                  var l = S.arg,
                    x = l.value;
                  return x && f(x) == 'object' && h.call(x, '__await')
                    ? t.resolve(x.__await).then(
                        function (O) {
                          r('next', O, m, w);
                        },
                        function (O) {
                          r('throw', O, m, w);
                        },
                      )
                    : t.resolve(x).then(
                        function (O) {
                          (l.value = O), m(l);
                        },
                        function (O) {
                          return r('throw', O, m, w);
                        },
                      );
                }
                w(S.arg);
              }
              var o;
              this._invoke = function (i, p) {
                function m() {
                  return new t(function (w, S) {
                    r(i, p, w, S);
                  });
                }
                return (o = o ? o.then(m, m) : m());
              };
            }
            function W(n, t) {
              var r = n.iterator[t.method];
              if (r === void 0) {
                if (((t.delegate = null), t.method === 'throw')) {
                  if (
                    n.iterator.return &&
                    ((t.method = 'return'), (t.arg = void 0), W(n, t), t.method === 'throw')
                  )
                    return k;
                  (t.method = 'throw'),
                    (t.arg = new TypeError("The iterator does not provide a 'throw' method"));
                }
                return k;
              }
              var o = I(r, n.iterator, t.arg);
              if (o.type === 'throw')
                return (t.method = 'throw'), (t.arg = o.arg), (t.delegate = null), k;
              var i = o.arg;
              return i
                ? i.done
                  ? ((t[n.resultName] = i.value),
                    (t.next = n.nextLoc),
                    t.method !== 'return' && ((t.method = 'next'), (t.arg = void 0)),
                    (t.delegate = null),
                    k)
                  : i
                : ((t.method = 'throw'),
                  (t.arg = new TypeError('iterator result is not an object')),
                  (t.delegate = null),
                  k);
            }
            function Q(n) {
              var t = { tryLoc: n[0] };
              1 in n && (t.catchLoc = n[1]),
                2 in n && ((t.finallyLoc = n[2]), (t.afterLoc = n[3])),
                this.tryEntries.push(t);
            }
            function H(n) {
              var t = n.completion || {};
              (t.type = 'normal'), delete t.arg, (n.completion = t);
            }
            function V(n) {
              (this.tryEntries = [{ tryLoc: 'root' }]), n.forEach(Q, this), this.reset(!0);
            }
            function C(n) {
              if (n) {
                var t = n[_];
                if (t) return t.call(n);
                if (typeof n.next == 'function') return n;
                if (!isNaN(n.length)) {
                  var r = -1,
                    o = function i() {
                      for (; ++r < n.length; )
                        if (h.call(n, r)) return (i.value = n[r]), (i.done = !1), i;
                      return (i.value = void 0), (i.done = !0), i;
                    };
                  return (o.next = o);
                }
              }
              return { next: j };
            }
            function j() {
              return { value: void 0, done: !0 };
            }
            return (
              (A.prototype = M),
              b(E, 'constructor', M),
              b(M, 'constructor', A),
              (A.displayName = b(M, L, 'GeneratorFunction')),
              (u.isGeneratorFunction = function (n) {
                var t = typeof n == 'function' && n.constructor;
                return !!t && (t === A || (t.displayName || t.name) === 'GeneratorFunction');
              }),
              (u.mark = function (n) {
                return (
                  Object.setPrototypeOf
                    ? Object.setPrototypeOf(n, M)
                    : ((n.__proto__ = M), b(n, L, 'GeneratorFunction')),
                  (n.prototype = Object.create(E)),
                  n
                );
              }),
              (u.awrap = function (n) {
                return { __await: n };
              }),
              q(Z.prototype),
              b(Z.prototype, P, function () {
                return this;
              }),
              (u.AsyncIterator = Z),
              (u.async = function (n, t, r, o, i) {
                i === void 0 && (i = Promise);
                var p = new Z(Y(n, t, r, o), i);
                return u.isGeneratorFunction(t)
                  ? p
                  : p.next().then(function (m) {
                      return m.done ? m.value : p.next();
                    });
              }),
              q(E),
              b(E, L, 'Generator'),
              b(E, _, function () {
                return this;
              }),
              b(E, 'toString', function () {
                return '[object Generator]';
              }),
              (u.keys = function (n) {
                var t = [];
                for (var r in n) t.push(r);
                return (
                  t.reverse(),
                  function o() {
                    for (; t.length; ) {
                      var i = t.pop();
                      if (i in n) return (o.value = i), (o.done = !1), o;
                    }
                    return (o.done = !0), o;
                  }
                );
              }),
              (u.values = C),
              (V.prototype = {
                constructor: V,
                reset: function (t) {
                  if (
                    ((this.prev = 0),
                    (this.next = 0),
                    (this.sent = this._sent = void 0),
                    (this.done = !1),
                    (this.delegate = null),
                    (this.method = 'next'),
                    (this.arg = void 0),
                    this.tryEntries.forEach(H),
                    !t)
                  )
                    for (var r in this)
                      r.charAt(0) === 't' &&
                        h.call(this, r) &&
                        !isNaN(+r.slice(1)) &&
                        (this[r] = void 0);
                },
                stop: function () {
                  this.done = !0;
                  var t = this.tryEntries[0].completion;
                  if (t.type === 'throw') throw t.arg;
                  return this.rval;
                },
                dispatchException: function (t) {
                  if (this.done) throw t;
                  var r = this;
                  function o(l, x) {
                    return (
                      (m.type = 'throw'),
                      (m.arg = t),
                      (r.next = l),
                      x && ((r.method = 'next'), (r.arg = void 0)),
                      !!x
                    );
                  }
                  for (var i = this.tryEntries.length - 1; i >= 0; --i) {
                    var p = this.tryEntries[i],
                      m = p.completion;
                    if (p.tryLoc === 'root') return o('end');
                    if (p.tryLoc <= this.prev) {
                      var w = h.call(p, 'catchLoc'),
                        S = h.call(p, 'finallyLoc');
                      if (w && S) {
                        if (this.prev < p.catchLoc) return o(p.catchLoc, !0);
                        if (this.prev < p.finallyLoc) return o(p.finallyLoc);
                      } else if (w) {
                        if (this.prev < p.catchLoc) return o(p.catchLoc, !0);
                      } else {
                        if (!S) throw new Error('try statement without catch or finally');
                        if (this.prev < p.finallyLoc) return o(p.finallyLoc);
                      }
                    }
                  }
                },
                abrupt: function (t, r) {
                  for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                    var i = this.tryEntries[o];
                    if (
                      i.tryLoc <= this.prev &&
                      h.call(i, 'finallyLoc') &&
                      this.prev < i.finallyLoc
                    ) {
                      var p = i;
                      break;
                    }
                  }
                  p &&
                    (t === 'break' || t === 'continue') &&
                    p.tryLoc <= r &&
                    r <= p.finallyLoc &&
                    (p = null);
                  var m = p ? p.completion : {};
                  return (
                    (m.type = t),
                    (m.arg = r),
                    p ? ((this.method = 'next'), (this.next = p.finallyLoc), k) : this.complete(m)
                  );
                },
                complete: function (t, r) {
                  if (t.type === 'throw') throw t.arg;
                  return (
                    t.type === 'break' || t.type === 'continue'
                      ? (this.next = t.arg)
                      : t.type === 'return'
                      ? ((this.rval = this.arg = t.arg),
                        (this.method = 'return'),
                        (this.next = 'end'))
                      : t.type === 'normal' && r && (this.next = r),
                    k
                  );
                },
                finish: function (t) {
                  for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                    var o = this.tryEntries[r];
                    if (o.finallyLoc === t) return this.complete(o.completion, o.afterLoc), H(o), k;
                  }
                },
                catch: function (t) {
                  for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                    var o = this.tryEntries[r];
                    if (o.tryLoc === t) {
                      var i = o.completion;
                      if (i.type === 'throw') {
                        var p = i.arg;
                        H(o);
                      }
                      return p;
                    }
                  }
                  throw new Error('illegal catch attempt');
                },
                delegateYield: function (t, r, o) {
                  return (
                    (this.delegate = { iterator: C(t), resultName: r, nextLoc: o }),
                    this.method === 'next' && (this.arg = void 0),
                    k
                  );
                },
              }),
              u
            );
          }
          (e.exports = d), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        15: function (e) {
          function a(s, f) {
            return (
              (e.exports = a =
                Object.setPrototypeOf
                  ? Object.setPrototypeOf.bind()
                  : function (u, c) {
                      return (u.__proto__ = c), u;
                    }),
              (e.exports.__esModule = !0),
              (e.exports.default = e.exports),
              a(s, f)
            );
          }
          (e.exports = a), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
        698: function (e) {
          function a(s) {
            return (
              (e.exports = a =
                typeof Symbol == 'function' && typeof Symbol.iterator == 'symbol'
                  ? function (f) {
                      return typeof f;
                    }
                  : function (f) {
                      return f &&
                        typeof Symbol == 'function' &&
                        f.constructor === Symbol &&
                        f !== Symbol.prototype
                        ? 'symbol'
                        : typeof f;
                    }),
              (e.exports.__esModule = !0),
              (e.exports.default = e.exports),
              a(s)
            );
          }
          (e.exports = a), (e.exports.__esModule = !0), (e.exports.default = e.exports);
        },
      },
      U = {};
    function v(e) {
      var a = U[e];
      if (a !== void 0) return a.exports;
      var s = (U[e] = { exports: {} });
      return $[e](s, s.exports, v), s.exports;
    }
    (function () {
      v.n = function (e) {
        var a =
          e && e.__esModule
            ? function () {
                return e.default;
              }
            : function () {
                return e;
              };
        return v.d(a, { a }), a;
      };
    })(),
      (function () {
        v.d = function (e, a) {
          for (var s in a)
            v.o(a, s) && !v.o(e, s) && Object.defineProperty(e, s, { enumerable: !0, get: a[s] });
        };
      })(),
      (function () {
        v.o = function (e, a) {
          return Object.prototype.hasOwnProperty.call(e, a);
        };
      })(),
      (function () {
        v.r = function (e) {
          typeof Symbol < 'u' &&
            Symbol.toStringTag &&
            Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }),
            Object.defineProperty(e, '__esModule', { value: !0 });
        };
      })();
    var J = {};
    return (
      (function () {
        'use strict';
        v.r(J),
          v.d(J, {
            L7Layer: function () {
              return V;
            },
            Map: function () {
              return Z;
            },
          });
        var e = v(690),
          a = v.n(e),
          s = v(728),
          f = v.n(s),
          d = v(655),
          u = v.n(d),
          c = v(389),
          h = v.n(c),
          y = v(980),
          _ = v(61),
          P = v.n(_),
          L = v(122),
          b = v.n(L),
          Y = v(215),
          I = v.n(Y),
          k = v(156),
          N = v.n(k),
          A = v(115),
          M = v.n(A),
          B = v(416),
          z = v.n(B),
          g = v(787),
          E = ['id', 'style', 'rotation', 'mapInstance', 'version', 'mapSize'],
          q = (function (C) {
            u()(n, C);
            var j = h()(n);
            function n() {
              var t;
              a()(this, n);
              for (var r = arguments.length, o = new Array(r), i = 0; i < r; i++)
                o[i] = arguments[i];
              return (
                (t = j.call.apply(j, [this].concat(o))),
                z()(M()(t), 'map', void 0),
                z()(M()(t), 'viewport', void 0),
                z()(M()(t), 'sceneContainer', void 0),
                z()(M()(t), 'handleCameraChanged', function (p) {
                  var m = t.map.getCenter(),
                    w = m.lat,
                    S = m.lng,
                    l = t.map.getSize(),
                    x = l.x,
                    O = l.y;
                  t.viewport.syncWithMapCamera({
                    bearing: 0,
                    center: [S, w],
                    viewportHeight: O,
                    pitch: 0,
                    viewportWidth: x,
                    zoom: t.map.getZoom() - 1,
                    cameraHeight: 0,
                  }),
                    t.updateCoordinateSystemService(),
                    t.cameraChangedCallback(t.viewport);
                }),
                t
              );
            }
            return (
              f()(n, [
                {
                  key: 'lngLatToMercator',
                  value: function (r, o) {
                    throw new Error('Method not implemented.');
                  },
                },
                {
                  key: 'getModelMatrix',
                  value: function (r, o, i, p, m) {
                    throw new Error('Method not implemented.');
                  },
                },
                {
                  key: 'init',
                  value: (function () {
                    var t = N()(
                      P()().mark(function o() {
                        var i, p, m, w, S, l, x, O, G, K, T, D, X, F;
                        return P()().wrap(
                          function (tt) {
                            for (;;)
                              switch ((tt.prev = tt.next)) {
                                case 0:
                                  (i = this.config),
                                    (p = i.id),
                                    (m = p === void 0 ? 'map' : p),
                                    (w = i.style),
                                    (S = w === void 0 ? 'light' : w),
                                    (l = i.rotation),
                                    (x = l === void 0 ? 0 : l),
                                    (O = i.mapInstance),
                                    (G = i.version),
                                    (K = G === void 0 ? 'Leaflet' : G),
                                    (T = i.mapSize),
                                    (D = T === void 0 ? 1e4 : T),
                                    (X = I()(i, E)),
                                    (this.viewport = new y.Viewport()),
                                    O
                                      ? ((this.map = O),
                                        (this.$mapContainer = this.map.getContainer()))
                                      : ((this.$mapContainer = this.creatMapContainer(m)),
                                        (this.map = new g.Map(
                                          this.$mapContainer,
                                          b()(
                                            b()({ zoomSnap: 0, zoomAnimation: !0 }, X),
                                            {},
                                            {
                                              center:
                                                (F = X.center) === null || F === void 0
                                                  ? void 0
                                                  : F.reverse(),
                                            },
                                          ),
                                        ))),
                                    g.DomUtil.addClass(this.$mapContainer, 'leaflet-zoom-anim'),
                                    this.map.on('zoomanim', this.onAnimZoom.bind(this)),
                                    this.map.on('moveend', this.update.bind(this)),
                                    this.handleCameraChanged();
                                case 7:
                                case 'end':
                                  return tt.stop();
                              }
                          },
                          o,
                          this,
                        );
                      }),
                    );
                    function r() {
                      return t.apply(this, arguments);
                    }
                    return r;
                  })(),
                },
                {
                  key: 'addMarkerContainer',
                  value: function () {
                    this.markerContainer = this.map.getPane('markerPane');
                  },
                },
                {
                  key: 'getOverlayContainer',
                  value: function () {
                    var r = this.map.getPane('overlayPane'),
                      o = g.DomUtil.create('div');
                    r.appendChild(o), (o.className = 'leaflet-layer');
                    var i = this.map.getSize();
                    return (
                      (o.style.width = ''.concat(i.x, 'px')),
                      (o.style.height = ''.concat(i.y, 'px')),
                      this.map._zoomAnimated && g.DomUtil.addClass(o, 'leaflet-zoom-animated'),
                      (this.sceneContainer = o),
                      o
                    );
                  },
                },
                {
                  key: 'update',
                  value: function () {
                    if (!this.map._animatingZoom) {
                      var r = this.map.getSize();
                      (this.sceneContainer.style.width = ''.concat(r.x, 'px')),
                        (this.sceneContainer.style.height = ''.concat(r.y, 'px'));
                      var o = this.map._getMapPanePos().multiplyBy(-1);
                      g.DomUtil.removeClass(this.sceneContainer, 'leaflet-zoom-animated'),
                        g.DomUtil.setPosition(this.sceneContainer, o),
                        this.handleCameraChanged();
                    }
                  },
                },
                {
                  key: 'onAnimZoom',
                  value: function (r) {
                    this.map._zoomAnimated &&
                      g.DomUtil.addClass(this.sceneContainer, 'leaflet-zoom-animated'),
                      this.updateTransform(r.center, r.zoom);
                  },
                },
                {
                  key: 'updateTransform',
                  value: function (r, o) {
                    var i = this.sceneContainer,
                      p = this.map.getZoomScale(o, this.map.getZoom()),
                      m = g.DomUtil.getPosition(i),
                      w = this.map.getSize().multiplyBy(0.5),
                      S = this.map.project(this.map.getCenter(), o),
                      l = this.map.project(r, o),
                      x = l.subtract(S),
                      O = w.multiplyBy(-p).add(m).add(w).subtract(x);
                    g.Browser.any3d ? g.DomUtil.setTransform(i, O, p) : g.DomUtil.setPosition(i, O);
                  },
                },
                {
                  key: 'onCameraChanged',
                  value: function (r) {
                    this.cameraChangedCallback = r;
                  },
                },
              ]),
              n
            );
          })(y.BaseMapService),
          Z = (function (C) {
            u()(n, C);
            var j = h()(n);
            function n() {
              return a()(this, n), j.apply(this, arguments);
            }
            return (
              f()(n, [
                {
                  key: 'getServiceConstructor',
                  value: function () {
                    return q;
                  },
                },
              ]),
              n
            );
          })(y.BaseMapWrapper);
        function W(C) {
          return {
            longitude: C.getCenter().lng,
            latitude: C.getCenter().lat,
            zoom: C.getZoom() - 1,
            pitch: 0,
            bearing: 0,
          };
        }
        function Q(C, j, n) {
          if (!n) {
            var t = W(C);
            n = new y.Scene({
              id: j,
              map: new y.Map({
                pitchEnabled: !1,
                rotateEnabled: !1,
                interactive: !1,
                center: [t.longitude, t.latitude],
                zoom: t.zoom,
                pitch: 0,
                rotation: 0,
              }),
            });
          }
          return n;
        }
        function H(C, j) {
          var n = W(j),
            t = j.getSize();
          C.getMapService().updateView({
            viewportWidth: t.x,
            viewportHeight: t.y,
            center: [n.longitude, n.latitude],
            zoom: n.zoom,
          });
        }
        var V = (function (C) {
          u()(n, C);
          var j = h()(n);
          function n(t) {
            var r;
            return (
              a()(this, n),
              (r = j.call(this)),
              z()(M()(r), 'container', void 0),
              z()(M()(r), 'animate', void 0),
              z()(M()(r), 'props', void 0),
              z()(M()(r), 'scene', void 0),
              (r.props = t),
              r
            );
          }
          return (
            f()(n, [
              {
                key: 'getScene',
                value: function () {
                  return this.scene;
                },
              },
              {
                key: 'onAdd',
                value: function () {
                  (this.container = g.DomUtil.create('div')),
                    (this.container.className = 'leaflet-layer'),
                    this._zoomAnimated &&
                      g.DomUtil.addClass(this.container, 'leaflet-zoom-animated'),
                    this.getPane().appendChild(this.container);
                  var r = this._map.getSize();
                  return (
                    (this.container.style.width = ''.concat(r.x, 'px')),
                    (this.container.style.height = ''.concat(r.y, 'px')),
                    (this.scene = Q(this._map, this.container, this.scene)),
                    this.update(),
                    this
                  );
                },
              },
              {
                key: 'onRemove',
                value: function (r) {
                  return g.DomUtil.remove(this.container), this;
                },
              },
              {
                key: 'getEvents',
                value: function () {
                  var r = { moveend: this.onMoveEnd, zoom: this.onZoom };
                  return this._zoomAnimated && (r.zoomanim = this.onAnimZoom), r;
                },
              },
              {
                key: 'update',
                value: function () {
                  if (!this._map._animatingZoom) {
                    var r = this._map.getSize();
                    (this.container.style.width = ''.concat(r.x, 'px')),
                      (this.container.style.height = ''.concat(r.y, 'px'));
                    var o = this._map._getMapPanePos().multiplyBy(-1);
                    g.DomUtil.setPosition(this.container, o), H(this.scene, this._map);
                  }
                },
              },
              {
                key: 'reset',
                value: function () {
                  this.updateTransform(this._map.getCenter(), this._map.getZoom()), this.update();
                },
              },
              {
                key: 'onMoveEnd',
                value: function () {
                  this.update();
                },
              },
              {
                key: 'onAnimZoom',
                value: function (r) {
                  this.updateTransform(r.center, r.zoom);
                },
              },
              {
                key: 'onZoom',
                value: function () {
                  this.updateTransform(this._map.getCenter(), this._map.getZoom());
                },
              },
              {
                key: 'updateTransform',
                value: function (r, o) {
                  var i = this._map.getZoomScale(o, this._map.getZoom()),
                    p = g.DomUtil.getPosition(this.container),
                    m = this._map.getSize().multiplyBy(0.5),
                    w = this._map.project(this._map.getCenter(), o),
                    S = this._map.project(r, o),
                    l = S.subtract(w),
                    x = m.multiplyBy(-i).add(p).add(m).subtract(l);
                  g.Browser.any3d
                    ? g.DomUtil.setTransform(this.container, x, i)
                    : g.DomUtil.setPosition(this.container, x);
                },
              },
            ]),
            n
          );
        })(g.Layer);
      })(),
      J
    );
  })();
});
